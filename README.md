# Visual Studo Code C++

## Step 1: Install gcc

First, run Windows Powershell as Administrator

```powershell
Set-ExecutionPolicy Bypass -Scope Process
# Then, type "A" and enter to accept Yes to All
```

Then run the below command to install Chocolatey

```powershell
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))
```

Wait a few seconds for the command to complete
$\rightarrow$ If you don't see any errors, you are ready to use Chocolatey!

Then install gcc by this command

```bash
choco install mingw
```

## Step 2: Determine the `g++` & `gdb` path

Open `git bash` and run this command

```bash
which g++
# Sample output: /c/ProgramData/chocolatey/bin/g++.exe

which gdb
# Sample output: /c/ProgramData/chocolatey/bin/gdb.exe
```

## Step 3: `.vscode` folder

1. Create a `.vscode` folder in the root directory.
2. Create two files named `tasks.json` and `launch.json`

### `tasks.json`

```json
{
    "tasks": [
        {
            "type": "cppbuild",
            "label": "C/C++: g++.exe build active file",
            "command": "EDIT HERE: g++.exe path",
            "args": [
                "-fdiagnostics-color=always",
                "-g",
                "${fileDirname}/*.cpp",
                "${fileDirname}/*.h",
                "${fileDirname}/sub_folder/*.cpp",
                "${fileDirname}/sub_folder/*.h",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        }
    ],
    "version": "2.0.0"
}
```

**TO DO:** Edit the `g++` path in line 6 and update the `args` based on the current `c++` folder structure

### `launch.json`

```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "g++.exe - Build and debug active file",
            "type": "cppdbg",
            "request": "launch",
            "program": "${fileDirname}\\${fileBasenameNoExtension}",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${fileDirname}",
            "environment": [],
            "externalConsole": true,
            "MIMode": "gdb",
            "miDebuggerPath": "EDIT HERE: gdb.exe path",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                },
                {
                    "description": "Set Disassembly Flavor to Intel",
                    "text": "-gdb-set disassembly-flavor intel",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "C/C++: g++.exe build active file"
        }
    ]
}
```

**TO DO:** Edit the `gdb` path in line 15

## Step 4: Use alias to automatically create `.vscode`

>Whenever you want to create a `.vscode` contains these prebuilt configs, you can open a new Git Bash terminal and type `codegcc`.

Go to `C:\Program Files\Git\etc\profile.d\aliases.sh` and add the alias below

```bash
alias codegcc='mkdir .vscode && echo "
{
    \"tasks\": [
        {
            \"type\": \"cppbuild\",
            \"label\": \"C/C++: g++.exe build active file\",
            \"command\": \"C:/ProgramData/chocolatey/bin/g++.exe\",
            \"args\": [
                \"-fdiagnostics-color=always\",
                \"-g\",
                \"\${fileDirname}/*.cpp\",
                \"\${fileDirname}/*.h\",
                \"\${fileDirname}/sub_folder/*.cpp\",
                \"\${fileDirname}/sub_folder/*.h\",
                \"-o\",
                \"\${fileDirname}/\${fileBasenameNoExtension}\"
            ],
            \"options\": {
                \"cwd\": \"\${fileDirname}\"
            },
            \"problemMatcher\": [
                \"\$gcc\"
            ],
            \"group\": {
                \"kind\": \"build\",
                \"isDefault\": true
            },
            \"detail\": \"Task generated by Debugger.\"
        }
    ],
    \"version\": \"2.0.0\"
}
" > .vscode/tasks.json && echo "
{
    \"version\": \"0.2.0\",
    \"configurations\": [
        {
            \"name\": \"g++.exe - Build and debug active file\",
            \"type\": \"cppdbg\",
            \"request\": \"launch\",
            \"program\": \"\${fileDirname}\\\\\${fileBasenameNoExtension}\",
            \"args\": [],
            \"stopAtEntry\": false,
            \"cwd\": \"\${fileDirname}\",
            \"environment\": [],
            \"externalConsole\": true,
            \"MIMode\": \"gdb\",
            \"miDebuggerPath\": \"C:/ProgramData/chocolatey/bin/gdb.exe\",
            \"setupCommands\": [
                {
                    \"description\": \"Enable pretty-printing for gdb\",
                    \"text\": \"-enable-pretty-printing\",
                    \"ignoreFailures\": true
                },
                {
                    \"description\": \"Set Disassembly Flavor to Intel\",
                    \"text\": \"-gdb-set disassembly-flavor intel\",
                    \"ignoreFailures\": true
                }
            ],
            \"preLaunchTask\": \"C/C++: g++.exe build active file\"
        }
    ]
}
" > .vscode/launch.json'
```
